<mat-card>
    <mat-card-title>Fechamento Caixa</mat-card-title>
    <form [formGroup]="caixa">
        <mat-form-field appearance="outline">
            <mat-label>Nome Usuario Caixa</mat-label>
            <input matInput type="text" placeholder="Ex: Maria F." name="nome" formControlName="nome">
        </mat-form-field>


        <div style="display:flex ;flex-direction: row">
            <mat-form-field appearance="outline">
                <mat-label>Valor Inical</mat-label>
                <input style="color: green" matInput 
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       placeholder="Ex: R$ 10.0" name="valorAbertura"
                       formControlName="valorAbertura"
                       type="text" min="0"
                       >
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Valor Total Caixa</mat-label>
                <input style="color: cornflowerblue" matInput currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"placeholder="Ex: R$ 10.0" name="valorFechamento"
                       formControlName="valorFechamento"
                       type="text" min="0">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Data Abertura</mat-label>
                <input  matInput prefix=" " placeholder="Ex: R$ 10.0" name="dataAbertura"
                       formControlName="dataAbertura"
                       type="datetime-local">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Data Fechamento</mat-label>
                <input  matInput prefix=" " placeholder="Ex: R$ 10.0" name="dataFechamento"
                       formControlName="dataFechamento"
                       type="datetime-local">
            </mat-form-field>

            
            <mat-form-field appearance="outline">
                <mat-label>Status</mat-label>
                <input matInput type="text" placeholder="Ex: Maria F." name="aberto" formControlName="aberto">
            </mat-form-field>
    




        </div>
        <div style="display:flex ;flex-direction: row">
            <mat-form-field appearance="outline">
                <mat-label>Valor Pagamento Dinheiro</mat-label>
                <input style="color: green" matInput 
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       placeholder="Ex: R$ 10.0" name="valorPagamentoDinheiro"
                       formControlName="valorPagamentoDinheiro"
                       type="text" min="0"
                       >
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Valor Total Fechamento Dinheiro</mat-label>
                <input disabled matInput   currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }" name="valorFechamentoDinheiro"
                       formControlName="valorFechamentoDinheiro"
                       type="text" min="0" (keydown.Tab)= verificaDiferenca()>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Diferença Dinheiro</mat-label>
                <input matInput  placeholder="Ex: R$ 10.0" name="diferencaDinheiro"
                       formControlName="diferencaDinheiro"
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       type="text" 
                       [style.color]="colorDif">
            </mat-form-field>
        </div>

        <div style="display:flex ;flex-direction: row">
            <mat-form-field appearance="outline">
                <mat-label>Valor Pagamento PIX</mat-label>
                <input style="color: green" matInput 
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       placeholder="Ex: R$ 10.0" name="valorPagamentoPix"
                       formControlName="valorPagamentoPix"
                       type="text" min="0">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Valor Total Fechamento PIX</mat-label>
                <input matInput prefix="R$ " m  currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       name="valorFechamentoPix"
                       formControlName="valorFechamentoPix"
                       type="text" min="0" (keydown.Tab)= verificaDiferenca()>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Diferenca PIX</mat-label>
                <input matInput placeholder="Ex: R$ 10.0" name="diferencaPix"
                       formControlName="diferencaPix"
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       type="text"
                       [style.color]="caixaF.diferencaPix=== 0 ? 'green' : 'darkred'" >
            </mat-form-field>
        </div>


        
        <div style="display:flex ;flex-direction: row">
            <mat-form-field appearance="outline">
                <mat-label>Valor Pagamento Cartão Credito</mat-label>
                <input style="color: green" matInput 
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       placeholder="Ex: R$ 10.0" name="valorPagamentoCartaoCredito"                       
                       formControlName="valorPagamentoCartaoCredito"
                       type="text" min="0">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Valor Total Fechamento Cartão Credito </mat-label>
                <input matInput prefix="R$ "   currencyMask
                [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"name="valorFechamentoCartaoCredito"
                       formControlName="valorFechamentoCartaoCredito"
                       type="text" (keydown.Tab)= verificaDiferenca()>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Diferenca Cartão Credito</mat-label>
                <input matInput placeholder="Ex: R$ 10.0" name="diferencaCartaoCredito"
                       formControlName="diferencaCartaoCredito"
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       type="text" 
                       [style.color]="caixaF.diferencaCartaoCredito=== 0 ? 'green' : 'darkred'">
            </mat-form-field>
        </div>

        <div style="display:flex ;flex-direction: row">
            <mat-form-field appearance="outline">
                <mat-label>Valor Pagamento Cartão Debito</mat-label>
                <input  style="color: green" matInput 
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       placeholder="Ex: R$ 10.0" name="valorPagamentoCartaoDebito"                       
                       formControlName="valorPagamentoCartaoDebito"
                       type="text" min="0">
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Valor Total Fechamento Cartão Debito </mat-label>
                <input matInput prefix="R$ "   currencyMask
                [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"name="valorFechamentoCartaoDebito"
                       formControlName="valorFechamentoCartaoDebito"
                       type="text" (keydown.Tab)= verificaDiferenca()>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Diferenca Cartão Debito</mat-label>
                <input matInput placeholder="Ex: R$ 10.0" name="diferencaCartaoDebito"
                       formControlName="diferencaCartaoDebito"
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       type="text"
                       [style.color]="caixaF.diferencaCartaoDebito=== 0 ? 'green' : 'darkred'" >
            </mat-form-field>
        </div>
        <div style="display:flex ;flex-direction: row">
            <mat-form-field appearance="outline">
                <mat-label>Valor Pagamento Consignado</mat-label>
                <input style="color: green" matInput 
                       currencyMask
                       [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',' }"
                       placeholder="Ex: R$ 10.0" name="valorPagamentoConsignado"                       
                       formControlName="valorPagamentoConsignado"
                       type="text" min="0">
            </mat-form-field>

        </div>

    </form>
    <div *ngIf="this.caixaF">
    
        <button mat-raised-button [disabled]="disable === true && this.caixaF && this.caixaF.aberto? false: true"
            (click)="fecharCaixa()" color="primary">
            Fechar Caixa
        </button>
    
        <button mat-raised-button (click)="cancelar()">
            Cancelar
        </button>
    
        <button mat-raised-button [disabled]="disable === true ? false: true"
            routerLink="/relatorio-caixa-fechamento/{{caixaF.id}}">
            Relatorio Pagamentos
        </button>
    
        <button mat-raised-button [disabled]="disable=== true  &&  this.caixaF && !this.caixaF.aberto ? false: true"
            routerLink="/relatorio-caixa-fechamento" color="primary">
            Relatorio Fechamento
        </button>
    </div>
    
   



</mat-card>
